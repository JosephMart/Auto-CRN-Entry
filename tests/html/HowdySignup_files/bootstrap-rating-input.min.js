(function(a){var b={round:{down:0.25,up:0.75}};a.fn.redraw=function(e){function d(l,j){var i=(j-Math.floor(j)).toFixed(2);var g=Math.ceil(j);if(i!=0){g=g-1}else{a(l).find("[data-value]").removeClass("fa-star").addClass("fa-star-o")}var k=a(l).find("[data-value="+g+"]");k.removeClass("fa-star-o").addClass("fa-star");k.prevAll("[data-value]").removeClass("fa-star-o").addClass("fa-star");k.nextAll("[data-value]").removeClass("fa-star").addClass("fa-star-o");var f=k.next("[data-value]");var h="fa-star-o";if(i>b.round.down){h="fa-star-half-o";if(i>b.round.up){h="fa-star"}}f.removeClass("fa-star-o").addClass(h)}var c=this;d(c.closest(".rating-input"),e)};a.fn.rating=function(){var h;function l(p){var i=a(p);i.find("[data-value]").removeClass("fa-star").addClass("fa-star-o")}function o(i,p){if(i.val()!=p){i.val(p).trigger("change")}if(p===i.data("empty-value")){i.siblings(".rating-clear").hide()}else{i.siblings(".rating-clear").show()}}for(h=this.length-1;h>=0;h--){var f,j,n=a(this[h]),m=n.data("max")||5,g=n.data("min")||0,d=n.data("clearable")||null,k=n.data("readonly")||null,e="";for(j=g;j<=m;j++){e+=['<span class="fa fa-star-o"       data-value="',j,'"></span>'].join("")}if(d&&!k){e+=[' <a class="rating-clear" style="display:none;" href="javascript:void">','<span class="glyphicon glyphicon-remove"></span> ',d,"</a>"].join("")}var c=n.clone(true).attr("type","hidden").data("max",m).data("min",g);f=['<div class="rating-input">',e,"</div>"].join("");n.replaceWith(a(f).append(c))}a(".rating-input").on("mouseenter","[data-value]",function(){var p=a(this).closest(".rating-input").find(".rating");var q=p.data("readonly");if(!q){var i=a(this);i.redraw(i.data("value"))}}).on("mouseleave","[data-value]",function(){var q=a(this),p=q.siblings("input"),s=p.val(),r=p.data("min"),i=p.data("max");if(s>=r&&s<=i){q.redraw(s)}else{l(q.closest(".rating-input"))}}).on("click","[data-value]",function(s){var q=a(this).closest(".rating-input").find(".rating");var r=q.data("readonly");if(!r){var p=a(this),t=p.data("value"),i=p.siblings("input");o(i,t);s.preventDefault();return false}}).on("click",".rating-clear",function(q){var p=a(this),i=p.siblings("input");o(i,i.data("empty-value"));l(p.closest(".rating-input"));q.preventDefault();return false}).each(function(){var p=a(this).find("input"),r=p.val(),q=p.data("min"),i=p.data("max");if(r!==""&&+r>=q&&+r<=i){a(this).redraw(r);a(this).find(".rating-clear").show()}else{p.val(p.data("empty-value"));l(this)}})};a(function(){if(a("input.rating[type=number]").length>0){a("input.rating[type=number]").rating()}})}(jQuery));